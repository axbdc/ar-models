<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Abrir em AR</title>
</head>
<body>
  <p>A abrir modelo em realidade aumentada...</p>

  <script>
    // URLs dos ficheiros
    const usdz = "https://axbdc.github.io/ar-models/stitch_ar2.usdz";
    const glb  = "https://axbdc.github.io/ar-models/stitch_ar.glb";

    // Função que cria o intent URL para Android
    function makeSceneIntent(glbUrl) {
      const fileParam = encodeURIComponent(glbUrl);
      return "intent://arvr.google.com/scene-viewer/1.0?file=" + fileParam +
             "&mode=ar_preferred#Intent;scheme=https;package=com.google.android.googlequicksearchbox;" +
             "action=android.intent.action.VIEW;end;";
    }

    // Detecta dispositivo
    const ua = navigator.userAgent;
    const isIOS = /iPhone|iPad|iPod/.test(ua);
    const isAndroid = /Android/.test(ua);

    if (isIOS) {
      // iOS → Quick Look
      window.location.href = usdz;
    } else if (isAndroid) {
      // Android → Scene Viewer
      window.location.href = makeSceneIntent(glb);
    } else {
      // Outros (desktop, etc.) → mostra link normal
      document.body.innerHTML += '<p><a href="' + glb + '">Ver modelo 3D (GLB)</a></p>';
    }
  </script>
</body>
</html>
